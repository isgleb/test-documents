<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Documents component</title>
    <link rel="stylesheet" href="assets/styles/category-row.css">
    <link rel="stylesheet" href="assets/styles/search.css">
    <link rel="stylesheet" href="assets/styles/document-row.css">
    <link rel="stylesheet" href="assets/styles/commons.css">
<!--    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@500&display=swap">-->


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@500&display=swap" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.js" integrity="sha512-2AL/VEauKkZqQU9BHgnv48OhXcJPx9vdzxN1JrKDVc4FPU/MEE/BZ6d9l0mP7VmvLsjtYwqiYQpDskK9dG8KBA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <div class="wrapper">
    <h1 data-bind="text: header"></h1>
    <div class="search">
        <div class="search-input-wrapper">
            <img src="assets/icons/searchLoupe.svg"/>
            <input data-bind="value: searchValue" class="search-input">
        </div>
        <div data-bind="if: showClearIcon">
            <img data-bind="click: clearSearch" src="assets/icons/deleteCross.svg" class="close-icon pointer"/>
        </div>
    </div>

    <ul data-bind="foreach: categories" style="margin-top: 20px">
        <li>
            <div class="row" data-bind="css: { 'first-row': $index() === 0 }" draggable="true">
                <div class="document-content row-data-block">
                    <img src="assets/icons/tickArrow.svg"  class="tick-element pointer" data-bind="click: $parent.openList, css: {'rotated': isOpen}"/>
                    <span data-bind="text: name" class="category-name"></span>
                    <span data-bind="text: comment" class="comment"></span>
                </div>
                <div class="document-content" data-bind="event: { dragover: $parent.stopChildPropagation }">
                    <img src="assets/icons/editPencil.svg" class="control-button pointer"/>
                    <img src="assets/icons/deleteBucket.svg" class="control-button pointer"/>
                    <img src="assets/icons/moveArrows.svg" class="control-button pointer" draggable="false" data-bind="event: {mousedown: $parent.allow}"/>
                </div>
            </div>
            <div data-bind="if: isOpen">
                <ul data-bind="foreach: documents"  class="document-ul">
                    <li class="document row" draggable="true">
                        <span class="document-content row-data-block">
                            <span data-bind="text: name" class="control-button"></span>
                            <span data-bind="text: required ? requiredStr : ''" class="control-button document-required"></span>
                            <span data-bind="text: comment" class="control-button comment"></span>
                        </span>
                        <div class="document-content" data-bind="event: { dragover: $parent.stopChildPropagation }">
                            <img src="assets/icons/editPencil.svg" class="control-button pointer"/>
                            <img src="assets/icons/deleteBucket.svg" class="control-button pointer"/>
                            <img src="assets/icons/moveArrows.svg" class="control-button pointer" draggable="false" data-bind="event: {mousedown: $parent.allow}"/>
                        </div>
                    </li>
                </ul>
            </div>

        </li>
    </ul>

    <ul data-bind="foreach: documents">
        <li class="document row"
            data-bind="
            attr: { draggable: isDraggable },
            css: { 'first-row': $index() === 0 },
            event: {
                dragstart: $parent.handleDragStart,
                dragend: $parent.handleDragEnd,
                dragover: $parent.handleDragOver,
                dragenter: $parent.handleDragEnter,
                dragleave: $parent.handleDragLeave,
                drop: $parent.handleDrop
            }"
        >
            <span class="document-content row-data-block" data-bind="event: { dragover: $parent.stopChildPropagation }" draggable="false">
                <span data-bind="text: name" class="control-button document-name"></span>
                <span data-bind="text: required ? requiredStr : ''" class="control-button document-required"></span>
                <span data-bind="text: comment" class="control-button comment"></span>
            </span>
            <span class="document-content" data-bind="event: { dragover: $parent.stopChildPropagation }" draggable="false" >
                <img src="assets/icons/editPencil.svg" draggable="false" class="control-button pointer"/>
                <img src="assets/icons/deleteBucket.svg" draggable="false" class="control-button pointer"/>
                <img src="assets/icons/moveArrows.svg" draggable="false" class="control-button pointer" data-bind="event: {mousedown: $parent.dragClick}"/>
            </span>
        </li>
    </ul>
</div>
</body>
<script type="text/javascript" src="scripts/data.js"></script>
<script type='text/javascript' src="scripts/main.js"></script>
</html>