<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Documents component</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.1/knockout-latest.js" integrity="sha512-2AL/VEauKkZqQU9BHgnv48OhXcJPx9vdzxN1JrKDVc4FPU/MEE/BZ6d9l0mP7VmvLsjtYwqiYQpDskK9dG8KBA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <ul data-bind="foreach: seats">
        <li draggable="true" ondragstart="drag(event)">
            <div data-bind="text: name"></div>
            <ul data-bind="foreach: mealName">
                <li>
                    <span data-bind="text: name"></span>
                    <span data-bind="text: required ? requiredStr : ''"></span>
                </li>
            </ul>
        </li>
    </ul>
</body>

<script type='text/javascript'>

    const requiredStr = "Обязательный"

    function drag(ev) {
        console.log(ev)
        ev.dataTransfer.setData("text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("text");
        // ev.target.appendChild(document.getElementById(data));
        console.log(data)
    }

    class SeatReservation{
        name
        meal
        constructor(name, meal) {
            this.name = name;
            this.meal = ko.observable(meal);
        }
    }

    const obj = {category: "", requirements: []}


    // Overall viewmodel for this screen, along with initial state
    function ReservationsViewModel() {
        // Editable data
        this.seats = ko.observableArray([
            { name: "steve", mealName: [{name:"fsgs", required: true}, {name:"fsgs", required: true}] },
            { name: "Paul", mealName: [{name:"fsgs", required: true}, {name:"fsgs", required: true}] }
        ]);
    }

    ko.applyBindings(new ReservationsViewModel());
</script>


<script>

    // console.log("hi")

    // // Here's my data model
    // var ViewModel = function(first, last) {
    //     this.firstName = ko.observable(first);
    //     this.lastName = ko.observable(last);
    //
    //     this.fullName = ko.computed(function() {
    //         // Knockout tracks dependencies automatically. It knows that fullName depends on firstName and lastName, because these get called when evaluating fullName.
    //         return this.firstName() + " " + this.lastName();
    //     }, this);
    // };
    //
    // ko.applyBindings(new ViewModel("Planet", "Earth")); // This makes Knockout get to work
</script>
</html>